<% 
  criterion = Refine::Inline::Criterion.new(
    stable_id: @refine_filter.to_stable_id,
    refine_filter: @refine_filter,
    client_id: @refine_client_id,
    conjunction: "or",
    position: position
  )
  use_modal ||= false
  fill_modal ||= false
  src = use_modal ? index_advanced_refine_inline_criteria_path(criterion.to_params.merge(fill_modal: fill_modal)) : refine_inline_criteria_path(criterion.to_params)
%>

<% if @refine_filter.criteria_limit_reached? %>
  <div class="refine--add-group-wrapper">
    <button disabled class="refine--add-group-button" type="button" title="<%= t(".criteria_limit", criteria_limit: @refine_filter.criteria_limit) %>">
      <span class="refine--add-group-button-label"><%= t(".group") %></span>
    </button>
  </div>
<% else %>
  
   <%= render "refine/inline/filters/modal_or_popup",
    frame_id: dom_id(criterion),
    use_modal: use_modal,
    fill_modal: fill_modal,
    src: src do
  %>
    <div class="refine--add-group-wrapper">
      <button class="refine--add-group-button" type="button" data-action="click->refine--popup#show click->refine--modal#open">
        <span class="refine--add-group-button-label"><%= t(".group") %></span>
      </button>
    </div>
  <% end %>
<% end %>
