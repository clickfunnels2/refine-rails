<%= turbo_frame_tag "criterion_#{criterion_id}" do %>
  <div class="flex items-center">
    <div class="mr-3">
      <%= form_tag(hammerstone_refine_blueprint_path, method: :put, data: {
        controller: "refine-update", refine_update_frame_id_value: "criterion_#{criterion_id}" }) do %>
        <% if local_assigns[:criterion].nil? %>
          <%= render partial: 'hammerstone/refine_blueprints/condition_select', locals: {
            conditions: conditions } %>
        <% else  %>
          <%= render partial: 'hammerstone/refine_blueprints/condition_select', locals: {
            conditions: conditions, selected_condition_id: criterion[:condition_id] } %>
        <% end %>
      <% end %>
    </div>
    <%= turbo_frame_tag "clause_#{criterion_id}", class: 'flex items-center' do %>
      <div class="mr-3">
        <%= render partial: 'hammerstone/refine_blueprints/clause_select', locals: {
          meta: meta_for_criterion(criterion, conditions), input: criterion[:input]} %>
      </div>
      <div>
        <%= render partial: "hammerstone/refine_blueprints/clauses/#{clause_for_criterion(criterion, conditions)}", locals: {
          meta: meta_for_criterion(criterion, conditions), input: criterion[:input], criterion_id: criterion_id } %>
      </div>
    <% end %>
  </div>
<% end %>
