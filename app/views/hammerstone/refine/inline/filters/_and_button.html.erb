<% 
  criterion = Hammerstone::Refine::Inline::Criterion.new(
    stable_id: @refine_filter.to_stable_id,
    refine_filter: @refine_filter,
    client_id: @refine_client_id,
    conjunction: "and",
    position: position
  )
%>

<% if @refine_filter.criteria_limit_reached? %>
  <button disabled class="refine--inline-btn" type="button" data-disabled-message="You can only create up to <%= @refine_filter.criteria_limit %> filter conditions">
    + Add Filter
  </button>
<% else %>
  <%= render "hammerstone/refine/inline/filters/popup",
    frame_id: dom_id(criterion),
    src: hammerstone_refine_inline_criteria_path(criterion.to_params) do
  %>
    <button class="refine--inline-btn" type="button" data-action="click->refine--popup#show">
      + Add Filter
    </button>
  <% end %>
<% end %>
