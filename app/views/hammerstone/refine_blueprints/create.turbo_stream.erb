<% if @form.valid? %>
  <%= turbo_stream.append create_id("hammerstone_refine_query") do %>
    <script>
      console.log("redirecting to valid filter")
      history.pushState({}, document.title, <%= params[:success_url].to_json.html_safe %>)
      window.location.reload()
    </script>
  <% end %>
<% else %>
  <%= turbo_stream.replace create_id("hammerstone_refine_query") do %>
    <script>
      console.log("updating form content for invalid filter")
    </script>
    <%= render partial: 'query' %>
  <% end %>
<% end %>
